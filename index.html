<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIBN Conference 2025</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Section */
        .header {
            /*
            background: linear-gradient(135deg, #1e3a2e 0%, #2d5a3d 100%); */
            background: url("screenshots/conference.jpg");
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            text-align: center;
            background: rgba(23, 50, 21, 0.5);
            padding: 60px;
        }

        /*
        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #fff, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }*/
        .logo{
            background: linear-gradient(135deg, #357b4e 0%, #224b39 100%);
            border-radius: 0;
            padding: 30px;
            border: 2px solid #ffd700;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .conference-banner {
            background: linear-gradient(135deg, #2d5a3d 0%, #1e3a2e 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid #ffd700;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .banner-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #ffd700;
        }

        .banner-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .banner-date {
            font-size: 1rem;
            color: #ffd700;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            padding: 40px 0;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .section.active {
            display: block;
        }

        .home-section {
            display: block;
        }

        .home-section.hidden {
            display: none;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Icon Grid */
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .icon-item {
            background: white;
            border-radius: 20px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .icon-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #2d5a3d 0%, #1e3a2e 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .icon-item:hover::before {
            opacity: 0.05;
        }

        .icon-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(45, 90, 61, 0.2);
            border-color: #ffd700;
        }

        .icon-item * {
            position: relative;
            z-index: 2;
        }

        .icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            transition: transform 0.3s ease;
        }

        .icon-item:hover .icon {
            transform: scale(1.1);
        }

        .icon-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: #2d5a3d;
            transition: color 0.3s ease;
        }

        .icon-item:hover .icon-label {
            color: #1e3a2e;
        }

        /* Back Button */
        .back-button {
            background: linear-gradient(135deg, #2d5a3d 0%, #1e3a2e 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(45, 90, 61, 0.3);
            border-color: #ffd700;
        }

        /* Section Content */
        .section-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 2px solid #e9ecef;
        }

        .section-title {
            font-size: 2rem;
            color: #2d5a3d;
            margin-bottom: 20px;
            text-align: center;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(135deg, #ffd700, #2d5a3d);
            border-radius: 2px;
        }

        .section-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
            text-align: center;
            margin-bottom: 20px;
        }

        /* Header visibility control */
        .header.hidden {
            display: none;
        }

        /* Install Prompt */
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: linear-gradient(135deg, #1e4d3b 0%, #2d6a4f 100%);
            color: white;
            padding: 16px 20px;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
            animation: slideUp 0.3s ease;
        }

        .install-prompt.show {
            display: block;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .install-content {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .install-icon {
            width: 40px;
            height: 40px;
            background: rgba(212,175,55,0.2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .install-text {
            flex: 1;
        }

        .install-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .install-subtitle {
            font-size: 12px;
            opacity: 0.9;
        }

        .install-buttons {
            display: flex;
            gap: 12px;
        }

        .install-btn {
            flex: 1;
            padding: 10px 16px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .install-btn.primary {
            background: #d4af37;
            color: #1e4d3b;
        }

        .install-btn.primary:hover {
            background: #b8941f;
            transform: translateY(-2px);
        }

        .install-btn.secondary {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .install-btn.secondary:hover {
            background: rgba(255,255,255,0.2);
        }

        .close-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            opacity: 0.7;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            opacity: 1;
        }

        /* iOS Instructions Modal */
        .ios-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .ios-modal.show {
            display: flex;
        }

        .ios-modal-content {
            background: white;
            border-radius: 20px;
            padding: 24px;
            max-width: 350px;
            width: 100%;
            text-align: center;
        }

        .ios-modal-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #1e4d3b, #2d6a4f);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            font-size: 24px;
            color: white;
        }

        .ios-modal-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e4d3b;
            margin-bottom: 16px;
        }

        .ios-instructions {
            text-align: left;
            margin-bottom: 20px;
        }

        .ios-step {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            font-size: 14px;
            color: #333;
        }

        .ios-step-number {
            width: 24px;
            height: 24px;
            background: #d4af37;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .ios-close-btn {
            background: #1e4d3b;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ios-close-btn:hover {
            background: #2d6a4f;
            transform: translateY(-2px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .logo {
                font-size: 2rem;
            }
            
            .banner-title {
                font-size: 1.5rem;
            }
            
            .icon-item {
                padding: 20px 10px;
            }
            
            .icon {
                font-size: 2rem;
            }
            
            .icon-label {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }
        }

        /* Loading Animation */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .loading {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <img src="icons/icon-96.png" alt="" class="logo">
                
                <div class="conference-banner">
                    <h1 class="banner-title">2025 Annual Conference</h1>
                    <p class="banner-subtitle">Connecting Industry Leaders & Innovators</p>
                    <div class="banner-date">August 15-17, 2025 | Adeola Hopewell, VI</div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Home Section -->
            <div id="home" class="section home-section active">
                <div class="icon-grid">
                    <div class="icon-item" onclick="showSection('agenda')">
                        <div class="icon">üìÖ</div>
                        <div class="icon-label">Agenda</div>
                    </div>
                    <div class="icon-item" onclick="showSection('speakers')">
                        <div class="icon">üé§</div>
                        <div class="icon-label">Speakers</div>
                    </div>
                    <div class="icon-item" onclick="showSection('attendees')">
                        <div class="icon">üë•</div>
                        <div class="icon-label">Attendees</div>
                    </div>
                    <div class="icon-item" onclick="showSection('sponsors')">
                        <div class="icon">üè¢</div>
                        <div class="icon-label">Sponsors</div>
                    </div>
                    <div class="icon-item" onclick="showSection('social')">
                        <div class="icon">üì±</div>
                        <div class="icon-label">Social Media</div>
                    </div>
                    <div class="icon-item" onclick="showSection('faqs')">
                        <div class="icon">‚ùì</div>
                        <div class="icon-label">FAQs</div>
                    </div>
                    <div class="icon-item" onclick="showSection('about')">
                        <div class="icon">‚ÑπÔ∏è</div>
                        <div class="icon-label">About</div>
                    </div>
                    <div class="icon-item" onclick="showSection('gallery')">
                        <div class="icon">üñºÔ∏è</div>
                        <div class="icon-label">Gallery</div>
                    </div>
                    <div class="icon-item" onclick="showSection('contact')">
                        <div class="icon">üìû</div>
                        <div class="icon-label">Contact</div>
                    </div>
                </div>
            </div>

            <!-- Agenda Section -->
            <div id="agenda" class="section">
                <button class="back-button" onclick="showHome()">‚Üê Back to Home</button>
                <div class="section-content">
                    <h2 class="section-title">Conference Agenda</h2>
                    <div class="section-text">
                        <p>Explore our comprehensive 3-day agenda featuring keynote speakers, panel discussions, workshops, and networking opportunities.</p>
                        <p><strong>Day 1:</strong> Opening Keynote & Innovation Showcase</p>
                        <p><strong>Day 2:</strong> Technical Sessions & Industry Panels</p>
                        <p><strong>Day 3:</strong> Workshops & Closing Ceremony</p>
                    </div>
                </div>
            </div>

            <!-- Speakers Section -->
            <div id="speakers" class="section">
                <button class="back-button" onclick="showHome()">‚Üê Back to Home</button>
                <div class="section-content">
                    <h2 class="section-title">Featured Speakers</h2>
                    <div class="section-text">
                        <p>Meet our distinguished lineup of industry leaders, innovators, and thought leaders who will share their expertise and insights.</p>
                        <p>Our speakers represent leading organizations across technology, finance, healthcare, and emerging industries.</p>
                    </div>
                </div>
            </div>

            <!-- Attendees Section -->
            <div id="attendees" class="section">
                <button class="back-button" onclick="showHome()">‚Üê Back to Home</button>
                <div class="section-content">
                    <h2 class="section-title">Attendees</h2>
                    <div class="section-text">
                        <p>Connect with over 1,500 professionals, executives, and industry experts attending the conference.</p>
                        <p>Network with peers, discover new opportunities, and build lasting professional relationships.</p>
                    </div>
                </div>
            </div>

            <!-- Sponsors Section -->
            <div id="sponsors" class="section">
                <button class="back-button" onclick="showHome()">‚Üê Back to Home</button>
                <div class="section-content">
                    <h2 class="section-title">Our Sponsors</h2>
                    <div class="section-text">
                        <p>We're proud to partner with leading organizations that support innovation and industry advancement.</p>
                        <p>Explore sponsorship opportunities and connect with our valued partners who make this conference possible.</p>
                    </div>
                </div>
            </div>

            <!-- Social Media Section -->
            <div id="social" class="section">
                <button class="back-button" onclick="showHome()">‚Üê Back to Home</button>
                <div class="section-content">
                    <h2 class="section-title">Social Media</h2>
                    <div class="section-text">
                        <p>Stay connected and share your conference experience with our community.</p>
                        <p>Follow us on LinkedIn, Twitter, and Instagram for live updates, behind-the-scenes content, and networking opportunities.</p>
                        <p><strong>Official Hashtag:</strong> #CIBN2025</p>
                    </div>
                </div>
            </div>

            <!-- FAQs Section -->
            <div id="faqs" class="section">
                <button class="back-button" onclick="showHome()">‚Üê Back to Home</button>
                <div class="section-content">
                    <h2 class="section-title">Frequently Asked Questions</h2>
                    <div class="section-text">
                        <p>Find answers to common questions about registration, venue, accommodation, and conference logistics.</p>
                        <p>Can't find what you're looking for? Contact our support team for personalized assistance.</p>
                    </div>
                </div>
            </div>

            <!-- About Section -->
            <div id="about" class="section">
                <button class="back-button" onclick="showHome()">‚Üê Back to Home</button>
                <div class="section-content">
                    <h2 class="section-title">About CIBN Conference</h2>
                    <div class="section-text">
                        <p>The CIBN Conference is the premier annual gathering for industry professionals, bringing together leaders, innovators, and visionaries to shape the future of business and technology.</p>
                        <p>Since 2010, we've been fostering connections, driving innovation, and creating opportunities for growth and collaboration.</p>
                    </div>
                </div>
            </div>

            <!-- Gallery Section -->
            <div id="gallery" class="section">
                <button class="back-button" onclick="showHome()">‚Üê Back to Home</button>
                <div class="section-content">
                    <h2 class="section-title">Photo Gallery</h2>
                    <div class="section-text">
                        <p>Explore highlights from previous conferences, including keynote moments, networking events, and exhibition showcases.</p>
                        <p>See the energy and excitement that makes CIBN Conference a must-attend event for industry professionals.</p>
                    </div>
                </div>
            </div>

            <!-- Contact Section -->
            <div id="contact" class="section">
                <button class="back-button" onclick="showHome()">‚Üê Back to Home</button>
                <div class="section-content">
                    <h2 class="section-title">Contact Us</h2>
                    <div class="section-text">
                        <p>Get in touch with our team for registration assistance, sponsorship opportunities, or general inquiries.</p>
                        <p><strong>Email:</strong> info@cibnconference.com</p>
                        <p><strong>Phone:</strong> +1 (555) 123-4567</p>
                        <p><strong>Address:</strong> Plot 19, Adeola Hopewell, VI, Lagos state</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Install Prompt -->
        <div id="installPrompt" class="install-prompt">
            <button class="close-btn" onclick="closeInstallPrompt()">√ó</button>
            <div class="install-content">
                <div class="install-icon">üì±</div>
                <div class="install-text">
                    <div class="install-title">Install CIBN Conference App</div>
                    <div class="install-subtitle">Get quick access and offline features</div>
                </div>
            </div>
            <div class="install-buttons">
                <button class="install-btn primary" onclick="installApp()">Install Now</button>
                <button class="install-btn secondary" onclick="showIOSInstructions()">iOS Instructions</button>
            </div>
        </div>

        <!-- iOS Instructions Modal -->
        <div id="iosModal" class="ios-modal">
            <div class="ios-modal-content">
                <div class="ios-modal-icon">üçé</div>
                <div class="ios-modal-title">Install on iOS</div>
                <div class="ios-instructions">
                    <div class="ios-step">
                        <div class="ios-step-number">1</div>
                        <div>Tap the Share button at the bottom of Safari</div>
                    </div>
                    <div class="ios-step">
                        <div class="ios-step-number">2</div>
                        <div>Scroll down and tap "Add to Home Screen"</div>
                    </div>
                    <div class="ios-step">
                        <div class="ios-step-number">3</div>
                        <div>Tap "Add" to install the app</div>
                    </div>
                    <div class="ios-step">
                        <div class="ios-step-number">4</div>
                        <div>Find the app icon on your home screen</div>
                    </div>
                </div>
                <button class="ios-close-btn" onclick="closeIOSModal()">Got it!</button>
            </div>
        </div>  
    </div>

    <script>
        // Universal PWA Installation Logic
let deferredPrompt;
let isInstalled = false;

// Detect browser and platform
function detectBrowser() {
    const userAgent = navigator.userAgent;
    const isChrome = /Chrome/.test(userAgent) && /Google Inc/.test(navigator.vendor);
    const isEdge = /Edg/.test(userAgent);
    const isFirefox = /Firefox/.test(userAgent);
    const isSafari = /Safari/.test(userAgent) && !/Chrome/.test(userAgent);
    const isAndroid = /Android/.test(userAgent);
    const isIOS = /iPad|iPhone|iPod/.test(userAgent);
    const isDesktop = !isAndroid && !isIOS;
    
    return {
        isChrome,
        isEdge,
        isFirefox,
        isSafari,
        isAndroid,
        isIOS,
        isDesktop,
        supportsPWA: isChrome || isEdge || (isFirefox && isAndroid),
        userAgent
    };
}

// Check if app is already installed or running as PWA
function checkInstallStatus() {
    // Check if running as PWA (standalone mode)
    if (window.matchMedia('(display-mode: standalone)').matches || 
        window.navigator.standalone === true ||
        document.referrer.includes('android-app://')) {
        isInstalled = true;
        return true;
    }
    
    // Check localStorage for install status
    if (localStorage.getItem('cibn-app-installed') === 'true') {
        isInstalled = true;
        return true;
    }
    
    return false;
}

// Show browser-specific install instructions
function showBrowserInstructions() {
    const browser = detectBrowser();
    let instructions = '';
    
    if (browser.isIOS) {
        instructions = `üì± Install on iOS Safari:
        
1. Tap the Share button (‚¨ÜÔ∏è) at the bottom
2. Scroll down and tap "Add to Home Screen"
3. Tap "Add" to install the app
4. Find the app icon on your home screen`;
    } else if (browser.isAndroid && browser.isChrome) {
        instructions = `üì± Install on Android Chrome:
        
1. Tap the menu (‚ãÆ) in the top right
2. Tap "Add to Home screen" or "Install app"
3. Tap "Add" to confirm
4. Find the app icon on your home screen`;
    } else if (browser.isAndroid && browser.isFirefox) {
        instructions = `üì± Install on Android Firefox:
        
1. Tap the menu (‚ãÆ) in the top right
2. Tap "Add to Home screen"
3. Tap "Add" to confirm
4. Find the app icon on your home screen`;
    } else if (browser.isDesktop && browser.isChrome) {
        instructions = `üíª Install on Desktop Chrome:
        
1. Look for the install icon (‚äï) in the address bar
2. Click it and select "Install"
3. Or click menu (‚ãÆ) ‚Üí "Install CIBN Conference App"
4. Find the app in your applications`;
    } else if (browser.isDesktop && browser.isEdge) {
        instructions = `üíª Install on Desktop Edge:
        
1. Look for the install icon (‚äï) in the address bar
2. Click it and select "Install"
3. Or click menu (‚ãØ) ‚Üí "Apps" ‚Üí "Install this site as an app"
4. Find the app in your applications`;
    } else {
        instructions = `üåê Manual Installation:
        
Your browser may support adding this site to your home screen:
1. Look for "Add to Home Screen" in your browser menu
2. Or bookmark this page for quick access
3. Some browsers show an install prompt automatically`;
    }
    
    // Show in a custom modal
    showCustomInstructions(instructions);
}

// Show custom instructions modal
function showCustomInstructions(instructions) {
    // Create modal if it doesn't exist
    let modal = document.getElementById('customInstructionsModal');
    if (!modal) {
        modal = document.createElement('div');
        modal.id = 'customInstructionsModal';
        modal.innerHTML = `
            <div class="custom-modal-overlay">
                <div class="custom-modal-content">
                    <button class="custom-modal-close" onclick="closeCustomInstructions()">√ó</button>
                    <div class="custom-modal-icon">üì±</div>
                    <div class="custom-modal-title">Install CIBN Conference App</div>
                    <div class="custom-modal-instructions"></div>
                    <button class="custom-modal-btn" onclick="closeCustomInstructions()">Got it!</button>
                </div>
            </div>
        `;
        
        // Add styles
        const style = document.createElement('style');
        style.textContent = `
            .custom-modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                opacity: 0;
                transition: opacity 0.3s ease;
            }
            .custom-modal-overlay.show { opacity: 1; }
            .custom-modal-content {
                background: white;
                border-radius: 12px;
                padding: 24px;
                max-width: 400px;
                width: 90%;
                max-height: 80vh;
                overflow-y: auto;
                position: relative;
                transform: scale(0.9);
                transition: transform 0.3s ease;
            }
            .custom-modal-overlay.show .custom-modal-content { transform: scale(1); }
            .custom-modal-close {
                position: absolute;
                top: 12px;
                right: 12px;
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: #999;
            }
            .custom-modal-icon {
                font-size: 48px;
                text-align: center;
                margin-bottom: 16px;
            }
            .custom-modal-title {
                font-size: 24px;
                font-weight: bold;
                text-align: center;
                margin-bottom: 20px;
                color: #333;
            }
            .custom-modal-instructions {
                white-space: pre-line;
                line-height: 1.6;
                color: #666;
                margin-bottom: 24px;
            }
            .custom-modal-btn {
                width: 100%;
                padding: 12px;
                background: #007bff;
                color: white;
                border: none;
                border-radius: 6px;
                font-size: 16px;
                cursor: pointer;
            }
            .custom-modal-btn:hover {
                background: #0056b3;
            }
        `;
        document.head.appendChild(style);
        document.body.appendChild(modal);
    }
    
    // Update instructions and show
    modal.querySelector('.custom-modal-instructions').textContent = instructions;
    modal.classList.add('show');
}

// Close custom instructions
function closeCustomInstructions() {
    const modal = document.getElementById('customInstructionsModal');
    if (modal) {
        modal.classList.remove('show');
    }
}

// Show/hide install prompt based on context
function updateInstallButton() {
    const installPrompt = document.getElementById('installPrompt');
    
    if (isInstalled || checkInstallStatus()) {
        if (installPrompt) {
            installPrompt.classList.remove('show');
        }
    }
}

// Show install prompt
function showInstallPrompt() {
    if (isInstalled || checkInstallStatus()) {
        return;
    }
    
    const installPrompt = document.getElementById('installPrompt');
    if (installPrompt) {
        setTimeout(() => {
            installPrompt.classList.add('show');
        }, 3000);
    }
}

// Close install prompt
function closeInstallPrompt() {
    const installPrompt = document.getElementById('installPrompt');
    if (installPrompt) {
        installPrompt.classList.remove('show');
    }
}

// Main install function - now works universally
async function installApp() {
    const browser = detectBrowser();
    
    // If we have a deferred prompt, use it
    if (deferredPrompt) {
        try {
            const result = await deferredPrompt.prompt();
            
            if (result.outcome === 'accepted') {
                localStorage.setItem('cibn-app-installed', 'true');
                isInstalled = true;
                updateInstallButton();
                closeInstallPrompt();
                alert('App installed successfully!');
            }
        } catch (error) {
            console.error('Installation error:', error);
            showBrowserInstructions();
        }
        deferredPrompt = null;
        return;
    }
    
    // Check if already installed
    if (checkInstallStatus()) {
        alert('App is already installed!');
        return;
    }
    
    // Show browser-specific instructions
    showBrowserInstructions();
}

// Show iOS instructions (keeping original function for compatibility)
function showIOSInstructions() {
    showBrowserInstructions();
}

// Close iOS modal (keeping for compatibility)
function closeIOSModal() {
    const iosModal = document.getElementById('iosModal');
    if (iosModal) {
        iosModal.classList.remove('show');
    }
    closeCustomInstructions();
}

// Service Worker Registration
if ('serviceWorker' in navigator) {
    window.addEventListener('load', async () => {
        try {
            const registration = await navigator.serviceWorker.register('service-worker.js');
            console.log('Service Worker registered successfully');
        } catch (error) {
            console.log('Service Worker registration failed:', error);
        }
    });
}

// Listen for install prompt
window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    
    if (!checkInstallStatus()) {
        showInstallPrompt();
    }
});

// Listen for app installed
window.addEventListener('appinstalled', () => {
    localStorage.setItem('cibn-app-installed', 'true');
    isInstalled = true;
    closeInstallPrompt();
    console.log('App installed successfully!');
});

// Navigation handler
function handleNavigation(element) {
    element.classList.add('loading');
    setTimeout(() => {
        element.classList.remove('loading');
        const page = element.getAttribute('href').replace('.html', '');
        alert(`Navigating to ${page.charAt(0).toUpperCase() + page.slice(1)} page...`);
    }, 1000);
    return false;
}

// Initialize app
document.addEventListener('DOMContentLoaded', function() {
    // Check install status on load
    checkInstallStatus();

    // Add animations to nav items
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach((item, index) => {
        item.style.animationDelay = `${index * 0.1}s`;
        item.style.animation = 'fadeInUp 0.6s ease forwards';
    });

    // Show install prompt for web users only
    if (!isInstalled) {
        showInstallPrompt();
    }
    
    // Log browser info for debugging
    const browser = detectBrowser();
    console.log('Browser detected:', browser);
});

        function showSection(sectionId) {
            // Hide header and home section (icons)
            document.querySelector('.header').classList.add('hidden');
            document.getElementById('home').classList.add('hidden');
            
            // Hide all other sections
            const sections = document.querySelectorAll('.section:not(#home)');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Show the selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showHome() {
            // Show header and home section (icons)
            document.querySelector('.header').classList.remove('hidden');
            document.getElementById('home').classList.remove('hidden');
            
            // Hide all other sections
            const sections = document.querySelectorAll('.section:not(#home)');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Add loading animation to icons on hover
        document.querySelectorAll('.icon-item').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.classList.add('loading');
            });
            
            item.addEventListener('mouseleave', function() {
                this.classList.remove('loading');
            });
        });

        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
    </script>
</body>
</html>
